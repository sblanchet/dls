#
# $Id$
# 
# This file is part of the Data Logging Service (DLS).
#
# DLS is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later
# version.
#
# DLS is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
# details.
#
# You should have received a copy of the GNU General Public License along
# with DLS. If not, see <http://www.gnu.org/licenses/>.
#
# vim: tw=78 spelllang=en spell
#

Name: @PACKAGE@
Version: @VERSION@
Release: 1

Summary: Data Logging Service
License: GPL
Vendor: Ingenieurgemeinschaft IgH GmbH
Group: EtherLab
Url: http://etherlab.org/en/dls
Source: http://etherlab.org/download/dls/%{name}-%{version}.tar.bz2
BuildRoot: %_tmppath/%name-%version-root
BuildRequires: gcc-c++ fltk-devel fftw3-devel

%description
DLS is a process data logging service, capable of capturing high-frequency
data over a long time and storing it in a compressed way. The aim is to allow
the user unlimited high-performance access to the data at any time. Be it a
year's overview or a small signal peak in fractions of a second.

%prep
%setup

%build
%configure
make

%install
make DESTDIR=${RPM_BUILD_ROOT} install
%if "%{_vendor}" == "suse"
install -d ${RPM_BUILD_ROOT}/usr/sbin
ln -s %{_sysconfdir}/init.d/dls ${RPM_BUILD_ROOT}%{_sbindir}/rcdls
%endif

%clean
rm -rf ${RPM_BUILD_ROOT}

%files
%defattr(-,root,root)
%doc AUTHORS ChangeLog COPYING INSTALL NEWS
%config %{_sysconfdir}/sysconfig/dls
%{_sysconfdir}/init.d/dls
%{_sysconfdir}/profile.d/dls.sh
%{_bindir}/dls*
%if "%{_vendor}" == "suse"
%{_sbindir}/rcdls
%endif
%{_datadir}/applications/*.desktop

%changelog
* Thu Jan 26 2012 fp@igh-essen.com
- Used macro dirs
- Added .desktop files
* Mon Jan 23 2012 fp@igh-essen.com
- Improved Url, BuildRoot, Source, BuildRequires.
